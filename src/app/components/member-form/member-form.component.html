<form
  class="lcc-form"
  [formGroup]="form"
  (ngSubmit)="onSubmit()">
  <div class="lcc-form-fields">
    <label
      for="first-name-input"
      class="lcc-required-field">
      First name:
    </label>
    <input
      id="first-name-input"
      type="text"
      name="first-name"
      formControlName="firstName"
      maxlength="30" />
    <lcc-form-error-icon [control]="form.controls.firstName"></lcc-form-error-icon>

    <label
      for="last-name-input"
      class="lcc-required-field">
      Last name:
    </label>
    <input
      id="last-name-input"
      type="text"
      name="last-name"
      formControlName="lastName"
      maxlength="30" />
    <lcc-form-error-icon [control]="form.controls.lastName"></lcc-form-error-icon>

    <label
      for="city-input"
      class="lcc-required-field">
      City:
    </label>
    <input
      id="city-input"
      type="text"
      name="city"
      formControlName="city"
      maxlength="30" />
    <lcc-form-error-icon [control]="form.controls.city"></lcc-form-error-icon>

    <label
      for="rating-input"
      class="lcc-required-field">
      LCC rating:
    </label>
    <input
      id="rating-input"
      type="text"
      name="rating"
      formControlName="rating"
      maxlength="6" />
    <lcc-form-error-icon [control]="form.controls.rating"></lcc-form-error-icon>

    <label
      for="date-joined-input"
      class="lcc-required-field">
      Date joined:
    </label>
    <lcc-date-picker
      id="date-joined-input"
      name="date-joined"
      formControlName="dateJoined">
    </lcc-date-picker>
    <lcc-form-error-icon [control]="form.controls.dateJoined"></lcc-form-error-icon>

    @if (!isSafeMode) {
      <label for="email-input">Email:</label>
      <input
        id="email-input"
        type="text"
        name="email"
        formControlName="email"
        maxlength="50" />
      <lcc-form-error-icon [control]="form.controls.email"></lcc-form-error-icon>

      <label for="phone-number-input">Phone number:</label>
      <input
        id="phone-number-input"
        type="text"
        name="phone-number"
        formControlName="phoneNumber"
        maxlength="12" />
      <lcc-form-error-icon [control]="form.controls.phoneNumber"></lcc-form-error-icon>

      <label for="year-of-birth-input">Year of birth:</label>
      <input
        id="year-of-birth-input"
        type="text"
        name="year-of-birth"
        formControlName="yearOfBirth"
        maxlength="4" />
      <lcc-form-error-icon [control]="form.controls.yearOfBirth"></lcc-form-error-icon>
    }

    <label for="chess-com-username-input">Chess.com username:</label>
    <input
      id="chess-com-username-input"
      type="text"
      name="chess-com-username"
      formControlName="chessComUsername"
      maxlength="20" />
    <lcc-form-error-icon [control]="form.controls.chessComUsername"></lcc-form-error-icon>

    <label for="lichess-username-input">Lichess username:</label>
    <input
      id="lichess-username-input"
      type="text"
      name="lichess-username"
      formControlName="lichessUsername"
      maxlength="20" />
    <lcc-form-error-icon [control]="form.controls.lichessUsername"></lcc-form-error-icon>
    @if (originalMember) {
      <label for="is-active-input">Active:</label>
      <input
        id="is-active-input"
        type="checkbox"
        name="is-active"
        formControlName="isActive" />
    }

    <button
      class="restore-button lcc-secondary-button"
      [disabled]="!hasUnsavedChanges"
      tooltip="Restore member to its original state"
      (click)="onRestore()">
      <mat-icon>restore</mat-icon>
    </button>
  </div>

  <aside class="lcc-required-fields-legend">Required fields</aside>

  @if (isSafeMode) {
    <lcc-safe-mode-notice entity="member's"></lcc-safe-mode-notice>
  }

  <hr />

  @if (originalMember?.modificationInfo; as info) {
    <lcc-modification-info [info]="info"></lcc-modification-info>
  }

  <div class="lcc-form-buttons-container">
    <button
      class="lcc-secondary-button"
      type="button"
      (click)="onCancel()">
      Cancel
    </button>
    <button
      class="lcc-primary-button"
      type="submit"
      [disabled]="form.invalid || !hasUnsavedChanges">
      {{ originalMember ? 'Update member' : 'Add member' }}
    </button>
  </div>
</form>
